$("#body").val('');
var $body   = $("<%= j render 'reviews/comment', comment: @comment %>").hide();

<% if @comment.valid? %>
  <% if @comment.parent_id.present? %>
    var $parent = $("*[data-id='" + <%= @comment.parent_id %> + "']")

    if ($parent.find('.nested_comments').length) {
      console.log("parent already had replies");
    } else {
      $nested_comments = $("<div class='nested_comments'>");
      $nested_comments.append($body);
      $parent.append($nested_comments);
      $(".comment-reply-form").remove();
    }
  <% else %>
    $(".comments-container").append($body);
  <% end %>

  $body.slideDown();

<% else %>

  console.log("An error occurred")

<% end %>
